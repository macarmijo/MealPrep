{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/Maca/Desktop/FullStack-Proyectos/ReactCoderhouse/MealPrep/src/components/CartState.js\",\n    _s = $RefreshSig$();\n\n// CartContext.js con el context y su custom provider (Impórtalo en App.js)\n// Al clickear comprar en ItemDetail se debe guardar en el CartContext el producto y su cantidad en forma de objeto { item: {} , quantity }\n// Detalle importante: CartContext debe tener la lógica incorporada de no aceptar duplicados y mantener su consistencia.\n// Métodos recomendados: \n// addItem(item, quantity) // agregar cierta cantidad de un ítem al carrito\n// removeItem(itemId) // Remover un item del cart por usando su id\n// clear() // Remover todos los items\n// isInCart: (id) => true|false\nimport React, { useState, useEffect } from 'react';\nimport CartContext from './CartContext';\n\nconst CartState = ({\n  children\n}) => {\n  _s();\n\n  const [cart, setCart] = useState([]); // const [cantItem, setCantItem] = useState(0)\n\n  const [total, setTotal] = useState(0);\n  const [cartEstado, setCartEstado] = useState(true);\n  const [orderIds, setOrderIds] = useState([]);\n  const [venta, setVenta] = useState({\n    nroPedido: \"\",\n    productos: [],\n    total: \"\"\n  });\n\n  const addToCart = ({\n    item,\n    cantidad,\n    id\n  }) => {\n    const double = cart.find(product => product.item.id === id);\n\n    if (double !== undefined) {\n      const duplicado = cart.findIndex(product => product.item.id == id);\n      cart.splice(duplicado, 1, {\n        item: item,\n        cantidad: cantidad + double.cantidad\n      });\n    } else {\n      setCart([...cart, {\n        item: item,\n        cantidad: cantidad\n      }]);\n    }\n  };\n\n  const isInCart = id => {\n    let repeat = cart.find(product => product.item.id === id);\n    return repeat ? true : false;\n  };\n\n  const deleteItem = id => {\n    const newCart = cart.filter(producto => producto.item.id !== id);\n    setCart(newCart);\n  };\n\n  const clearCart = () => {\n    setCart([]);\n  };\n\n  const updateCantidad = () => {\n    const total = cart.reduce((accumulator, item) => accumulator + item.cantidad, 0);\n    setCantItem(total); // const oldCart = cart\n    // const newCart = oldCart.map(p => {\n    //     if(p.item.id === id){\n    //         p.cantidad = cantidad\n    //     }\n    //     return p\n    // })\n    // setCart(newCart)\n  };\n\n  const getTotal = () => {\n    const sum = cart.reduce((accumulator, producto) => accumulator + producto.price * producto.cantidad, 0);\n    setTotal(sum);\n  };\n\n  useEffect(() => {\n    updateCantidad();\n    getTotal();\n  }, [cart]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      addToCart,\n      isInCart,\n      deleteItem,\n      clearCart,\n      updateCantidad,\n      cantItem,\n      cart,\n      total,\n      orderIds,\n      setOrderIds,\n      cartEstado,\n      setCartEstado,\n      venta,\n      setVenta\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CartState, \"mlTEyHq7JMufsFn1Fgd/dzYStHY=\");\n\n_c = CartState;\nexport default CartState;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartState\");","map":{"version":3,"sources":["/Users/Maca/Desktop/FullStack-Proyectos/ReactCoderhouse/MealPrep/src/components/CartState.js"],"names":["React","useState","useEffect","CartContext","CartState","children","cart","setCart","total","setTotal","cartEstado","setCartEstado","orderIds","setOrderIds","venta","setVenta","nroPedido","productos","addToCart","item","cantidad","id","double","find","product","undefined","duplicado","findIndex","splice","isInCart","repeat","deleteItem","newCart","filter","producto","clearCart","updateCantidad","reduce","accumulator","setCantItem","getTotal","sum","price","cantItem"],"mappings":"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","sourcesContent":["// CartContext.js con el context y su custom provider (Impórtalo en App.js)\n// Al clickear comprar en ItemDetail se debe guardar en el CartContext el producto y su cantidad en forma de objeto { item: {} , quantity }\n// Detalle importante: CartContext debe tener la lógica incorporada de no aceptar duplicados y mantener su consistencia.\n// Métodos recomendados: \n// addItem(item, quantity) // agregar cierta cantidad de un ítem al carrito\n// removeItem(itemId) // Remover un item del cart por usando su id\n// clear() // Remover todos los items\n// isInCart: (id) => true|false\nimport React, {useState, useEffect} from 'react'\nimport CartContext from './CartContext'\n\nconst CartState = ({children}) => {\n\n    const [cart, setCart] = useState([])\n    // const [cantItem, setCantItem] = useState(0)\n    const [total, setTotal] = useState(0)\n    const [cartEstado, setCartEstado] = useState(true)\n    const [orderIds, setOrderIds] = useState ([])\n    const [venta, setVenta] = useState({\n        nroPedido:\"\",\n        productos:[],\n        total:\"\"\n    })\n      \n\n    const addToCart = ({item, cantidad, id}) => {\n\n        const double = cart.find(product => product.item.id === id)\n\n        if(double !== undefined){\n            const duplicado = cart.findIndex(product => product.item.id == id)\n            cart.splice(duplicado, 1, \n                {\n                    item: item, \n                    cantidad: cantidad + double.cantidad\n            })\n        }else{\n            setCart([\n                ...cart,\n                {\n                    item: item,\n                    cantidad: cantidad\n                } \n            ])\n        }        \n    }\n\n    const isInCart = id => {\n        let repeat = cart.find(product => product.item.id === id)\n        return (repeat ? true:false)\n    }\n\n    const deleteItem = id => {\n        const newCart = cart.filter(producto => producto.item.id !== id)\n        setCart(newCart)\n    }\n\n    const clearCart = () => {\n        setCart([])\n    }\n\n    const updateCantidad = () => {\n        const total = cart.reduce((accumulator, item) => accumulator + item.cantidad, 0)\n        setCantItem(total);\n        // const oldCart = cart\n        // const newCart = oldCart.map(p => {\n        //     if(p.item.id === id){\n        //         p.cantidad = cantidad\n        //     }\n        //     return p\n        // })\n        // setCart(newCart)\n    }\n\n    const getTotal = () => {\n        const sum = cart.reduce((accumulator, producto) => accumulator + producto.price*producto.cantidad, 0)\n        setTotal(sum)\n    }\n\n    useEffect(()=>{\n        updateCantidad();\n        getTotal();\n        \n    }, [cart])\n    \n       \n    \n  \n    return (\n        <CartContext.Provider value={{\n            addToCart, \n            isInCart, \n            deleteItem,\n            clearCart, \n            updateCantidad, \n            cantItem, \n            cart, \n            total, \n            orderIds,\n            setOrderIds,\n            cartEstado, \n            setCartEstado,\n            venta,\n            setVenta\n            }}>\n            {children}\n        </CartContext.Provider>\n    )\n}\n\nexport default CartState\n"]},"metadata":{},"sourceType":"module"}