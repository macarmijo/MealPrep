{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/Maca/Desktop/FullStack-Proyectos/ReactCoderhouse/MealPrep/src/components/CartState.js\",\n    _s = $RefreshSig$();\n\n// CartContext.js con el context y su custom provider (Impórtalo en App.js)\n// Al clickear comprar en ItemDetail se debe guardar en el CartContext el producto y su cantidad en forma de objeto { item: {} , quantity }\n// Detalle importante: CartContext debe tener la lógica incorporada de no aceptar duplicados y mantener su consistencia.\n// Métodos recomendados: \n// addItem(item, quantity) // agregar cierta cantidad de un ítem al carrito\n// removeItem(itemId) // Remover un item del cart por usando su id\n// clear() // Remover todos los items\n// isInCart: (id) => true|false\nimport React, { useState, useEffect } from 'react';\nimport CartContext from './CartContext';\n\nconst CartState = ({\n  children\n}) => {\n  _s();\n\n  const [cart, setCart] = useState([]);\n  const [quantity, setQuantity] = useState(0);\n  const [total, setTotal] = useState();\n  useEffect(() => {\n    var t = 0; // Con el map obtengo el total por producto\n\n    const totals = cart.map(p => p.price * p.cantidad); // Sumo a t el total por producto de cada uno\n\n    totals.map(p => t = t + p); // Lo guardo en el estado\n\n    setTotal(t); // Calculo la cantidad de productos\n\n    const cartQuantity = cart.length; // Las guardo en el estado\n\n    setQuantity(cartQuantity);\n  }, [cart]); // const getTotal = () => {\n  // }\n  // const cartCant = () => {\n  // }\n  // Función para ver si el producto está en el carrito\n\n  const isInCart = id => {\n    const item = cart.find(p => p.id === id);\n\n    if (item === undefined) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  const addToCart = (item, contador, id) => {\n    // Si el producto está en el carrito, le agrego la cantidad, no un producto nuevo\n    if (isInCart(id)) {\n      // Encuentro el producto \n      const oldProduct = cart.find(p => p.id === id); // Armo la nueva cantidad de productos\n\n      const newQuantity = oldProduct.cantidad + contador; // Armo el nuevo producto cambiandole la cantidad\n\n      const newProduct = {\n        id: oldProduct.id,\n        name: oldProduct.name,\n        image: oldProduct.image,\n        price: oldProduct.price,\n        amount: newQuantity\n      }; // Elimino el antiguo producto para no tener duplicados\n\n      const cartWithoutOld = cart.filter(item => item.id = !id); // Agrego el nuevo producto\n\n      const cartWithNew = [...cartWithoutOld, newProduct]; // Guardo en el estado el nuevo listado\n\n      setCart(cartWithNew);\n    } else {\n      // Guardo en el estado cart el producto que eligió y la cantidad\n      const newItem = {\n        id: item.id,\n        name: item.title,\n        image: item.imagen,\n        price: item.price,\n        amount: contador\n      };\n      setCart([...cart, newItem]);\n    }\n  };\n\n  const eliminateFromCart = id => {\n    // Elimino el producto por Id filtrando y quedandome con todos los que no tienen el id seleccionado\n    const newCart = cart.filter(item => item.id !== id); // Guardo el nuevo carrito\n\n    setCart(newCart);\n  };\n\n  const clearCart = () => {\n    // Guardo como estado un array vacío\n    setCart([]);\n    setQuantity(0);\n  };\n\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      quantity,\n      total,\n      addToCart,\n      eliminateFromCart,\n      clearCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CartState, \"GUjBw/0hta4Tvvuv8LMbIeXqiKo=\");\n\n_c = CartState;\nexport default CartState;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartState\");","map":{"version":3,"sources":["/Users/Maca/Desktop/FullStack-Proyectos/ReactCoderhouse/MealPrep/src/components/CartState.js"],"names":["React","useState","useEffect","CartContext","CartState","children","cart","setCart","quantity","setQuantity","total","setTotal","t","totals","map","p","price","cantidad","cartQuantity","length","isInCart","id","item","find","undefined","addToCart","contador","oldProduct","newQuantity","newProduct","name","image","amount","cartWithoutOld","filter","cartWithNew","newItem","title","imagen","eliminateFromCart","newCart","clearCart"],"mappings":"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","sourcesContent":["// CartContext.js con el context y su custom provider (Impórtalo en App.js)\n// Al clickear comprar en ItemDetail se debe guardar en el CartContext el producto y su cantidad en forma de objeto { item: {} , quantity }\n// Detalle importante: CartContext debe tener la lógica incorporada de no aceptar duplicados y mantener su consistencia.\n// Métodos recomendados: \n// addItem(item, quantity) // agregar cierta cantidad de un ítem al carrito\n// removeItem(itemId) // Remover un item del cart por usando su id\n// clear() // Remover todos los items\n// isInCart: (id) => true|false\nimport React, {useState, useEffect} from 'react'\nimport CartContext from './CartContext'\n\nconst CartState = ({children}) => {\n    \n    const [ cart, setCart ] = useState([])\n    const [ quantity, setQuantity ] = useState(0)\n    const [ total, setTotal ] = useState()\n\n    useEffect(() => {\n        var t = 0\n        // Con el map obtengo el total por producto\n        const totals = cart.map( p => p.price * p.cantidad)\n        // Sumo a t el total por producto de cada uno\n        totals.map( p => t = t + p)\n        // Lo guardo en el estado\n        setTotal(t)\n        // Calculo la cantidad de productos\n        const cartQuantity = cart.length\n        // Las guardo en el estado\n        setQuantity(cartQuantity)\n    }, [cart])\n\n\n    // const getTotal = () => {\n        \n    // }\n    // const cartCant = () => {\n         \n    // }\n\n\n    // Función para ver si el producto está en el carrito\n    const isInCart = id => {\n        const item = cart.find(p => p.id === id)\n        if (item === undefined){\n            return false\n        }\n        else {\n            return true\n        }\n    }\n\n    const addToCart = (item, contador, id) => {\n         \n        // Si el producto está en el carrito, le agrego la cantidad, no un producto nuevo\n        if (isInCart(id)){\n            // Encuentro el producto \n            const oldProduct = cart.find(p => p.id === id)\n            // Armo la nueva cantidad de productos\n            const newQuantity = oldProduct.cantidad + contador           \n            // Armo el nuevo producto cambiandole la cantidad\n            const newProduct = { id: oldProduct.id, name: oldProduct.name, image: oldProduct.image, price: oldProduct.price, amount: newQuantity}\n            // Elimino el antiguo producto para no tener duplicados\n            const cartWithoutOld = cart.filter(item => item.id =! id)\n            // Agrego el nuevo producto\n            const cartWithNew = [...cartWithoutOld, newProduct]\n            // Guardo en el estado el nuevo listado\n            setCart(cartWithNew)            \n        } else {\n            // Guardo en el estado cart el producto que eligió y la cantidad\n            const newItem = { id: item.id, name: item.title, image: item.imagen, price: item.price, amount: contador }\n            setCart([...cart, newItem]) \n        }\n    }\n\n    const eliminateFromCart = (id) => {\n        // Elimino el producto por Id filtrando y quedandome con todos los que no tienen el id seleccionado\n        const newCart = cart.filter(item => item.id !== id)\n        // Guardo el nuevo carrito\n        setCart(newCart)\n    }\n\n    const clearCart = () => {\n        // Guardo como estado un array vacío\n        setCart([])\n        setQuantity(0)\n    }\n    \n       \n    \n  \n    return (\n        <CartContext.Provider value={{\n             cart,\n             quantity, \n             total, \n             addToCart, \n             eliminateFromCart, \n             clearCart \n            }}>\n            {children}\n        </CartContext.Provider>\n    )\n}\n\nexport default CartState\n"]},"metadata":{},"sourceType":"module"}