{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/Maca/Desktop/FullStack-Proyectos/ReactCoderhouse/MealPrep/src/components/CartState.js\",\n    _s = $RefreshSig$();\n\n// CartContext.js con el context y su custom provider (Impórtalo en App.js)\n// Al clickear comprar en ItemDetail se debe guardar en el CartContext el producto y su cantidad en forma de objeto { item: {} , quantity }\n// Detalle importante: CartContext debe tener la lógica incorporada de no aceptar duplicados y mantener su consistencia.\n// Métodos recomendados: \n// addItem(item, quantity) // agregar cierta cantidad de un ítem al carrito\n// removeItem(itemId) // Remover un item del cart por usando su id\n// clear() // Remover todos los items\n// isInCart: (id) => true|false\nimport React, { useState, useEffect } from 'react';\nimport CartContext from './CartContext';\n\nconst CartState = ({\n  children\n}) => {\n  _s();\n\n  // const itemsInLocal = () => {\n  //     if (localStorage.getItem('cart') !== null){\n  //        return JSON.parse(localStorage.getItem('cart')) \n  //     }else{\n  //         return [];\n  //     }\n  // }\n  // const ordersInLocal = () => {\n  //     if (localStorage.getItem('my-orders') !== null){\n  //         return JSON.parse(localStorage.getItem('my-orders'))\n  //     }else{\n  //         return [];\n  //     }\n  // }\n  const [cart, setCart] = useState([]);\n  const [cantItem, setCantItem] = useState(0);\n  const [total, setTotal] = useState(0);\n  const [cartEstado, setCartEstado] = useState(true);\n  const [orderIds, setOrderIds] = useState([]);\n  const [venta, setVenta] = useState({\n    nroPedido: \"\",\n    productos: [],\n    total: \"\"\n  });\n\n  const addToCart = ({\n    item,\n    cantidad,\n    id\n  }) => {\n    const double = cart.find(product => product.item.id === id);\n\n    if (double !== undefined) {\n      const duplicado = cart.findIndex(product => product.item.id == id);\n      cart.splice(duplicado, 1, {\n        item: item,\n        cantidad: cantidad + double.cantidad\n      });\n    } else {\n      setCart([...cart, {\n        item: item,\n        cantidad: cantidad\n      }]);\n    }\n  };\n\n  const isInCart = id => {\n    let itemR = cart.find(product => product.item.id === id);\n    return itemR ? true : false;\n  };\n\n  const deleteItem = id => {\n    const newCart = cart.filter(producto => producto.item.id !== id);\n    setCart(newCart);\n    localStorage.setItem('cart', JSON.stringify(newCart));\n  };\n\n  const clearCart = () => {\n    setCart([]);\n  };\n\n  const updateCantidad = (id, cantidad) => {\n    const total = cart.reduce((accumulator, item) => accumulator + item.cantidad, 0);\n    setItems(total); // const oldCart = cart\n    // const newCart = oldCart.map(p => {\n    //     if(p.item.id === id){\n    //         p.cantidad = cantidad\n    //     }\n    //     return p\n    // })\n    // setCart(newCart)\n  };\n\n  const getTotal = () => {\n    const sum = cart.reduce((accumulator, producto) => accumulator + producto.price * producto.cantidad, 0);\n    setTotal(sum);\n  };\n\n  useEffect(() => {\n    updateCantidad();\n    localStorage.setItem('cart', JSON.stringify(cart));\n    localStorage.setItem('my-orders', JSON.stringify(orderIds));\n    getTotal(); // let total =  0;\n    // let totals = cart.map( p => p.item.precio * p.cantidad)\n    // totals.map(t => total += t)\n    // setTotal(cart.reduce((accumulator, currentValue) => accumulator + (currentValue.item.precio * currentValue.cantidad), 0))\n    // setCantidadItem(cart.reduce((accumulator, currentValue) => accumulator + currentValue.cantidad, 0))\n  }, [cart]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      addToCart,\n      isInCart,\n      deleteItem,\n      clearCart,\n      updateCantidad,\n      cantItem,\n      cart,\n      total,\n      orderIds,\n      setOrderIds\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CartState, \"NaJuVMnIfUIdeIt4qIe1+AZ5F0s=\");\n\n_c = CartState;\nexport default CartState;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartState\");","map":{"version":3,"sources":["/Users/Maca/Desktop/FullStack-Proyectos/ReactCoderhouse/MealPrep/src/components/CartState.js"],"names":["React","useState","useEffect","CartContext","CartState","children","cart","setCart","cantItem","setCantItem","total","setTotal","cartEstado","setCartEstado","orderIds","setOrderIds","venta","setVenta","nroPedido","productos","addToCart","item","cantidad","id","double","find","product","undefined","duplicado","findIndex","splice","isInCart","itemR","deleteItem","newCart","filter","producto","localStorage","setItem","JSON","stringify","clearCart","updateCantidad","reduce","accumulator","setItems","getTotal","sum","price"],"mappings":"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","sourcesContent":["// CartContext.js con el context y su custom provider (Impórtalo en App.js)\n// Al clickear comprar en ItemDetail se debe guardar en el CartContext el producto y su cantidad en forma de objeto { item: {} , quantity }\n// Detalle importante: CartContext debe tener la lógica incorporada de no aceptar duplicados y mantener su consistencia.\n// Métodos recomendados: \n// addItem(item, quantity) // agregar cierta cantidad de un ítem al carrito\n// removeItem(itemId) // Remover un item del cart por usando su id\n// clear() // Remover todos los items\n// isInCart: (id) => true|false\nimport React, {useState, useEffect} from 'react'\nimport CartContext from './CartContext'\n\nconst CartState = ({children}) => {\n\n    // const itemsInLocal = () => {\n    //     if (localStorage.getItem('cart') !== null){\n    //        return JSON.parse(localStorage.getItem('cart')) \n    //     }else{\n    //         return [];\n    //     }\n    // }\n\n    // const ordersInLocal = () => {\n    //     if (localStorage.getItem('my-orders') !== null){\n    //         return JSON.parse(localStorage.getItem('my-orders'))\n    //     }else{\n    //         return [];\n    //     }\n    // }\n\n    const [cart, setCart] = useState([])\n    const [cantItem, setCantItem] = useState(0)\n    const [total, setTotal] = useState(0)\n    const [cartEstado, setCartEstado] = useState(true)\n    const [orderIds, setOrderIds] = useState ([])\n    const [venta, setVenta] = useState({\n        nroPedido:\"\",\n        productos:[],\n        total:\"\"\n    })\n      \n\n    const addToCart = ({item, cantidad, id}) => {\n\n        const double = cart.find(product => product.item.id === id)\n\n        if(double !== undefined){\n            const duplicado = cart.findIndex(product => product.item.id == id)\n            cart.splice(duplicado, 1, \n                {\n                    item: item, \n                    cantidad: cantidad + double.cantidad\n            })\n        }else{\n            setCart([\n                ...cart,\n                {\n                    item: item,\n                    cantidad: cantidad\n                } \n            ])\n        }        \n    }\n\n    const isInCart = id => {\n        let itemR = cart.find(product => product.item.id === id)\n        return (itemR ? true:false)\n    }\n\n    const deleteItem = id => {\n        const newCart = cart.filter(producto => producto.item.id !== id)\n        setCart(newCart)\n        localStorage.setItem('cart', JSON.stringify(newCart))\n    }\n\n    const clearCart = () => {\n        setCart([])\n    }\n\n    const updateCantidad = (id, cantidad) => {\n        const total = cart.reduce((accumulator, item) => accumulator + item.cantidad, 0)\n        setItems(total);\n        // const oldCart = cart\n        // const newCart = oldCart.map(p => {\n        //     if(p.item.id === id){\n        //         p.cantidad = cantidad\n        //     }\n        //     return p\n        // })\n        // setCart(newCart)\n    }\n\n    const getTotal = () => {\n        const sum = cart.reduce((accumulator, producto) => accumulator + producto.price*producto.cantidad, 0)\n        setTotal(sum)\n    }\n\n    useEffect(()=>{\n\n        updateCantidad();\n        localStorage.setItem('cart', JSON.stringify(cart))\n        localStorage.setItem('my-orders', JSON.stringify(orderIds))\n        getTotal();\n        // let total =  0;\n        // let totals = cart.map( p => p.item.precio * p.cantidad)\n        // totals.map(t => total += t)\n        // setTotal(cart.reduce((accumulator, currentValue) => accumulator + (currentValue.item.precio * currentValue.cantidad), 0))\n        // setCantidadItem(cart.reduce((accumulator, currentValue) => accumulator + currentValue.cantidad, 0))\n        \n    }, [cart])\n    \n       \n    \n  \n    return (\n        <CartContext.Provider value={{\n            addToCart, \n            isInCart, \n            deleteItem,\n            clearCart, \n            updateCantidad, \n            cantItem, \n            cart, \n            total, \n            orderIds,\n            setOrderIds,\n            }}>\n            {children}\n        </CartContext.Provider>\n    )\n}\n\nexport default CartState\n"]},"metadata":{},"sourceType":"module"}